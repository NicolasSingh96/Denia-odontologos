<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro Completo - DenIA</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        .brand-logo { font-size: 2.5rem; margin-bottom: 10px; display: block; }
        .visa-color { color: #1A1F71; }
        .master-color { color: #EB001B; }
        .nx-color { color: #FF6600; font-weight: 800; font-family: sans-serif; letter-spacing: -1px; }
        .mp-color { color: #009EE3; }
        
        /* Grid de 4 columnas para pagos */
        .payment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-card" style="max-width: 800px;">
            
            <div class="auth-header" style="text-align: center; margin-bottom: 30px;">
                <h2 style="font-family: 'Space Grotesk', sans-serif;">Configura tu DenIA</h2>
                <p style="color: #94a3b8;">Datos requeridos para facturaci√≥n y configuraci√≥n del Bot.</p>
            </div>

            <div class="steps-indicator">
                <div class="step-dot active" id="dot-1">1</div>
                <div class="step-dot" id="dot-2">2</div>
                <div class="step-dot" id="dot-3">3</div>
            </div>
            
            <form id="signupForm">
                
                <div class="step-content active" id="step-1">
                    <h3 style="color: var(--primary-cyan); margin-bottom: 20px;">Datos del Profesional</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">Nombre *</label>
                            <input type="text" id="profName" class="form-input" placeholder="Juan" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Apellido *</label>
                            <input type="text" id="profSurname" class="form-input" placeholder="P√©rez" required>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">WhatsApp (Bot) *</label>
                            <input type="tel" class="form-input" placeholder="+54 9 11..." required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email de Acceso *</label>
                            <input type="email" class="form-input" placeholder="dr@email.com" required>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">Matr√≠cula</label>
                            <input type="text" class="form-input" placeholder="M.N / M.P">
                        </div>
                        <div class="form-group">
                            <label class="form-label">CUIT *</label>
                            <input type="text" class="form-input" placeholder="20-xxxxxxxx-x" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Especialidad</label>
                            <select class="form-select">
                                <option>General</option>
                                <option>Ortodoncia</option>
                                <option>Implantes</option>
                                <option>Est√©tica</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Direcci√≥n del Consultorio *</label>
                        <input type="text" class="form-input" placeholder="Av. Corrientes 1234, CABA" required>
                    </div>

                    <div class="form-group" style="background: rgba(0, 242, 255, 0.05); padding: 15px; border-radius: 8px; border: 1px solid rgba(0, 242, 255, 0.2);">
                        <label class="form-label" style="color: var(--primary-cyan); font-weight: bold;">Selecciona tu Plan Base</label>
                        <select class="form-select" id="planSelect" onchange="updateBasePlan()" style="background: #050510;">
                            <option value="consultorio" selected>Plan Consultorio ($15.000/mes)</option>
                            <option value="clinica">Plan Cl√≠nica ($30.000/mes)</option>
                            <option value="residente">Plan Residente (Prueba 7 d√≠as)</option>
                        </select>
                    </div>

                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn-primary" onclick="nextStep(2)">Siguiente: Configuraci√≥n <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <div class="step-content" id="step-2">
                    <h3 style="color: var(--primary-cyan); margin-bottom: 10px;">Configuraci√≥n Inicial</h3>
                    <p style="font-size: 0.9rem; color: #ccc; margin-bottom: 20px;">Servicio opcional de carga de datos (Pago √önico)</p>

                    <div class="selection-grid">
                        <div class="selection-card selected" onclick="selectProtocol(0, this, 'manual')">
                            <i class="fas fa-check-circle check-icon"></i>
                            <div style="font-size: 2rem;">üö´</div>
                            <h4 style="color:#fff; margin:10px 0;">Sin Configuraci√≥n Extra</h4>
                            <div style="color:var(--primary-cyan); font-weight:bold;">$0</div>
                            <p style="font-size:0.7rem; color:#aaa;">Yo cargo mis tiempos</p>
                        </div>
                        
                        <div class="selection-card" onclick="selectProtocol(20000, this, 'simple')">
                            <i class="fas fa-check-circle check-icon"></i>
                            <div style="font-size: 2rem;">üìã</div>
                            <h4 style="color:#fff; margin:10px 0;">Config. Simple</h4>
                            <div style="color:var(--primary-cyan); font-weight:bold;">$20.000</div>
                            <p style="font-size:0.7rem; color:#aaa;">Hasta 20 tratamientos</p>
                        </div>

                        <div class="selection-card" onclick="selectProtocol(50000, this, 'pro')">
                            <i class="fas fa-check-circle check-icon"></i>
                            <div style="font-size: 2rem;">‚ö°</div>
                            <h4 style="color:#fff; margin:10px 0;">Config. Pro</h4>
                            <div style="color:var(--primary-cyan); font-weight:bold;">$50.000</div>
                            <p style="font-size:0.7rem; color:#aaa;">Agenda Completa + Reglas</p>
                        </div>

                        <div class="selection-card" onclick="selectProtocol(150000, this, 'migracion')">
                            <i class="fas fa-check-circle check-icon"></i>
                            <div style="font-size: 2rem;">üöÄ</div>
                            <h4 style="color:#fff; margin:10px 0;">Migraci√≥n Total</h4>
                            <div style="color:var(--primary-cyan); font-weight:bold;">$150.000</div>
                            <p style="font-size:0.7rem; color:#aaa;">Datos + Pacientes + Multi-Sill√≥n</p>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                        <button type="button" class="btn-secondary" onclick="nextStep(1)">Atr√°s</button>
                        <button type="button" class="btn-primary" onclick="nextStep(3)">Ir al Pago <i class="fas fa-credit-card"></i></button>
                    </div>
                </div>

                <div class="step-content" id="step-3">
                    <h3 style="color: var(--primary-cyan); margin-bottom: 20px;">Finalizar Suscripci√≥n</h3>
                    <p style="font-size: 0.9rem; color: #ccc; margin-bottom: 15px;">Elige tu medio de pago:</p>
                    
                    <div class="payment-grid">
                        <div class="selection-card selected" onclick="selectPayment('card', this)">
                            <i class="fas fa-check-circle check-icon"></i>
                            <i class="fab fa-cc-visa brand-logo visa-color"></i>
                            <p style="font-size: 0.8rem;">Visa</p>
                        </div>
                        
                        <div class="selection-card" onclick="selectPayment('card', this)">
                            <i class="fas fa-check-circle check-icon"></i>
                            <i class="fab fa-cc-mastercard brand-logo master-color"></i>
                            <p style="font-size: 0.8rem;">Mastercard</p>
                        </div>

                        <div class="selection-card" onclick="selectPayment('card', this)">
                            <i class="fas fa-check-circle check-icon"></i>
                            <div class="brand-logo nx-color">Nx</div>
                            <p style="font-size: 0.8rem;">Naranja X</p>
                        </div>

                        <div class="selection-card" onclick="selectPayment('mp', this)">
                            <i class="fas fa-check-circle check-icon"></i>
                            <i class="fas fa-hand-holding-usd brand-logo mp-color"></i>
                            <p style="font-size: 0.8rem;">Mercado Pago</p>
                        </div>
                    </div>

                    <div id="cardDetailsForm" style="margin-top: 20px;">
                        <div class="form-group">
                            <label class="form-label">N√∫mero de Tarjeta</label>
                            <input type="text" class="form-input" placeholder="0000 0000 0000 0000">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label class="form-label">Vencimiento (MM/AA)</label>
                                <input type="text" class="form-input" placeholder="MM/AA">
                            </div>
                            <div class="form-group">
                                <label class="form-label">CVV</label>
                                <input type="text" class="form-input" placeholder="123">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nombre del Titular</label>
                            <input type="text" class="form-input" placeholder="Como figura en la tarjeta">
                        </div>
                    </div>

                    <div id="mpMessage" style="display: none; text-align: center; padding: 30px; background: rgba(0, 158, 227, 0.1); border-radius: 10px; border: 1px dashed #009EE3;">
                        <i class="fas fa-qrcode" style="font-size: 3rem; color: #009EE3; margin-bottom: 15px;"></i>
                        <p>Ser√°s redirigido a Mercado Pago para completar la transacci√≥n de forma segura.</p>
                    </div>

                    <div style="background: rgba(0, 242, 255, 0.1); padding: 20px; border-radius: 10px; margin-top: 20px; border: 1px solid var(--primary-cyan);">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 1.1rem;">Total a Pagar Hoy:</span>
                            <span id="finalTotalDisplay" style="font-size: 1.8rem; font-weight: bold; color: #fff;">$15.000</span>
                        </div>
                        <div style="text-align: right; font-size: 0.8rem; color: #ccc; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 10px; padding-top: 5px;" id="breakdownDetail">
                            Plan: $15.000 + Config: $0
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                        <button type="button" class="btn-secondary" onclick="nextStep(2)">Atr√°s</button>
                        <button type="submit" class="btn-primary" style="width: 60%;">CONFIRMAR Y PAGAR üöÄ</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentPlan = 'consultorio';
        let currentPlanPrice = 15000;
        let currentProto = 'manual';
        let currentAddonPrice = 0;

        // Actualizar precio base seg√∫n plan elegido en Paso 1
        function updateBasePlan() {
            const select = document.getElementById('planSelect');
            currentPlan = select.value;
            
            if(currentPlan === 'residente') currentPlanPrice = 0;
            else if(currentPlan === 'consultorio') currentPlanPrice = 15000;
            else if(currentPlan === 'clinica') currentPlanPrice = 30000;
            
            updateTotal();
        }

        // Seleccionar Protocolo en Paso 2
        function selectProtocol(price, element, protoName) {
            currentAddonPrice = price;
            currentProto = protoName;
            document.querySelectorAll('#step-2 .selection-card').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
            updateTotal();
        }

        // Seleccionar M√©todo de Pago en Paso 3
        function selectPayment(type, element) {
            // Estilos visuales
            document.querySelectorAll('#step-3 .selection-card').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');

            // Mostrar u ocultar formulario seg√∫n sea Tarjeta o MP
            const form = document.getElementById('cardDetailsForm');
            const mpMsg = document.getElementById('mpMessage');

            if(type === 'mp') {
                form.style.display = 'none';
                mpMsg.style.display = 'block';
            } else {
                form.style.display = 'block';
                mpMsg.style.display = 'none';
            }
        }

        // Calcular Totales
        function updateTotal() {
            const total = currentPlanPrice + currentAddonPrice;
            document.getElementById('finalTotalDisplay').innerText = "$" + total.toLocaleString();
            
            const planName = currentPlan.charAt(0).toUpperCase() + currentPlan.slice(1);
            document.getElementById('breakdownDetail').innerText = `Plan ${planName}: $${currentPlanPrice.toLocaleString()} + Config: $${currentAddonPrice.toLocaleString()}`;
        }

        // Navegaci√≥n entre pasos
        function nextStep(step) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.getElementById('step-'+step).classList.add('active');
            
            for(let i=1; i<=3; i++) {
                let dot = document.getElementById('dot-'+i);
                dot.classList.remove('active', 'completed');
                if(i < step) dot.classList.add('completed');
                if(i === step) dot.classList.add('active');
            }
            if(step === 3) updateTotal();
        }

        // Env√≠o del formulario
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = this.querySelector('button[type="submit"]');
            btn.innerText = "Procesando...";
            
            // Guardar datos en LocalStorage para el Dashboard
            const fullName = document.getElementById('profName').value + ' ' + document.getElementById('profSurname').value;
            localStorage.setItem('deniaUser', fullName);
            localStorage.setItem('deniaPlan', currentPlan);
            localStorage.setItem('deniaProtocol', currentProto);

            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 2000);
        });
    </script>
</body>
</html>